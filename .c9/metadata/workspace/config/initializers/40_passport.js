{"filter":false,"title":"40_passport.js","tooltip":"/config/initializers/40_passport.js","undoManager":{"mark":9,"position":9,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":45}},"text":"passport.serializeUser(function(user, done) {"},{"action":"insertText","range":{"start":{"row":0,"column":45},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":18,"column":0}},"lines":["    done(null, user.id);","  });","  passport.deserializeUser(function(id, done) {","    User.findById(id, function (err, user) {","      done(err, user);","    });","  });","","  passport.use(new LocalStrategy(","    function(username, password, done) {","      User.findOne({ username: username }, function(err, user) {","        if (err) { return done(err); }","        if (!user) { return done(null, false); }","        if (!user.validPassword(password)) { return done(null, false); }","        return done(null, user);","      });","    }"]},{"action":"insertText","range":{"start":{"row":18,"column":0},"end":{"row":18,"column":5}},"text":"  ));"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":1,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":1,"column":0},"end":{"row":2,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":1,"column":0},"end":{"row":1,"column":35}},"text":"var passport = require('passport');"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":0},"end":{"row":3,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":3,"column":0},"end":{"row":3,"column":55}},"text":"    LocalStrategy = require('passport-local').Strategy;"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":1,"column":34},"end":{"row":1,"column":35}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":1,"column":34},"end":{"row":1,"column":35}},"text":","}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":1,"column":35},"end":{"row":2,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":55},"end":{"row":3,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":3,"column":0},"end":{"row":3,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":4},"end":{"row":4,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":4,"column":0},"end":{"row":4,"column":4}},"text":"    "}]}]]},"ace":{"folds":[],"scrolltop":71,"scrollleft":0,"selection":{"start":{"row":13,"column":0},"end":{"row":13,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":4,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1407786117000,"hash":"f4bd28430396e03b71fb89470d3124cf5ff8fe90"}